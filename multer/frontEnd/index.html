<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <!-- <img
      src="http://127.0.0.1:8080/img/block-chain-6999639_1685410786682.jpg"
      alt=""
    /> -->
    <input type="text" id="imgs" />
    <input type="file" id="file" />
    <button id="uploadBtn">img upload</button>
    <a href="http://127.0.0.1:5500/frontEnd/login.html">login</a>
    <a href="http://127.0.0.1:5500/frontEnd/signup.html">signup</a>
    <a href="http://127.0.0.1:8080/mypage">mypage</a>
  </body>
  <script>
    uploadBtn.onclick = () => {
      // new Formdata() : formData를 동적으로 생성
      const form = new FormData();
      // console.log(form);
      // html 상에서 name으로 키값을 전달하던 부분을 append 메소드로 설정
      // 첫번째 매개변수 : 키
      // 두번째 매개변수 : 값
      form.append("imgs", imgs.value);
      // input안의 파일 내용 확인
      // console.log(file.files[0]);
      // file은 버퍼 데이터로 들어 오기 때문에 files로 생성됨
      form.append("upload", file.files[0]);

      // console.log(form);
      // 파일을 보낼때 파일의 데이터를 폼데이터로 보낸다고 설정
      // 헤더의 내용으로 인코딩된 폼 데이터로 전송한다고 설정
      axios
        .post("http://127.0.0.1:8080/upload", form, {
          "Content-Type": "multipart/form-data",
        })
        .then((e) => {
          console.log("upload success");
          console.log(e.data);
        })
        .catch((err) => {
          console.error(err);
        });
    };
  </script>
</html>
